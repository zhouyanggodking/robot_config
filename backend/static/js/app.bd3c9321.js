(function(e){function t(t){for(var r,a,c=t[0],l=t[1],p=t[2],m=t[3]||[],d=0,g=[];d<c.length;d++)a=c[d],o[a]&&g.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);f&&f(t);var h=document.getElementsByTagName("head")[0];m.forEach(function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");u.nc&&t.setAttribute("nonce",u.nc),t.rel="prefetch",t.as="script",t.href=s(e),h.appendChild(t)}});while(g.length)g.shift()();return i.push.apply(i,p||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function s(e){return u.p+"js/"+({pages:"pages"}[e]||e)+"."+{pages:"886744c5"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={pages:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({pages:"pages"}[e]||e)+"."+{pages:"f0117a7f"}[e]+".css",o=u.p+r,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===o))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){c=p[s],l=c.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(f)}).then(function(){a[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=o[e]=[t,n]});t.push(r[2]=i);var c,l=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,u.nc&&p.setAttribute("nonce",u.nc),p.src=s(e),c=function(t){p.onerror=p.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");i.type=r,i.request=a,n[1](i)}o[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:p})},12e4);p.onerror=p.onload=c,l.appendChild(p)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var f=l;t([[],{},0,["pages"]]),i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0d0d":function(e,t,n){"use strict";var r=n("d259"),a=n.n(r);a.a},"3ca2":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("91d1");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s="AUTH_TOKEN",u="USER_NAME",c=function(){function e(){a(this,e)}return i(e,null,[{key:"isLoggedIn",value:function(){return!!e.getAuthToken()}},{key:"getAuthToken",value:function(){return r["a"].getItem(s)}},{key:"getLoggedUserName",value:function(){return r["a"].getItem(u)}}]),e}()},"458f":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("bc3a"),a=n.n(r),o=n("2b0e"),i=n("5c96"),s=n.n(i),u=n("0665"),c=n.n(u),l=n("3ca2"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},f=[],m={name:"App",mounted:function(){var e=document.getElementById("skeleton");e&&document.body.removeChild(e)}},d=m,g=(n("5c0b"),n("2877")),h=Object(g["a"])(d,p,f,!1,null,null,null);h.options.__file="App.vue";var v=h.exports,b=n("8c4f"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-page"},[n("navigation",{staticClass:"top-bar"}),n("main",{staticClass:"main"},[n("div",{staticClass:"row device-info"},[n("span",{staticClass:"sn"},[e._v("设备序列号： "+e._s(e.seriesNumber))]),n("el-button",{staticClass:"restart",attrs:{type:"danger",icon:"el-icon-refresh-left",loading:e.isRestarting},on:{click:e.onRestartBtnClick}},[e._v("系统重启")]),n("el-button",{staticClass:"shutdown",attrs:{type:"danger",loading:e.isShutingDown},on:{click:e.onShutdownBtnClick}},[e._v("关闭系统")]),n("el-button",{staticClass:"debug",attrs:{type:"primary",loading:e.isDebuging},on:{click:e.onMimicDebugBtnClick}},[e._v("模拟调试")]),n("el-button",{staticClass:"updates",attrs:{type:"warning",loading:e.isCheckingForUpdates},on:{click:e.onUpdatesBtnClick}},[e._v("检查程序更新")])],1),n("div",{staticClass:"row sections"},e._l(e.sections,function(t,r){return n("div",{key:r,staticClass:"section"},[n("div",{staticClass:"row title-container"},[n("eva-icon",{attrs:{name:t.icon,fill:"#00e"}}),n("router-link",{staticClass:"title link",attrs:{to:{name:t.routeName}}},[e._v(e._s(t.title))])],1),n("div",{staticClass:"desc"},[e._v("\n          "+e._s(t.desc)+"\n        ")])])}))])],1)},w=[],k=n("a34a"),C=n.n(k),_=n("f4dd");function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}var I=function(){function e(){x(this,e)}return N(e,null,[{key:"getDeviceInfo",value:function(){return a.a.get("/api/device").then(function(e){return e.data})}},{key:"restartServer",value:function(){return a.a.post("/api/restart").then(function(e){return e.data})}},{key:"shutdownServer",value:function(){return a.a.post("/api/shutdown").then(function(e){return e.data})}},{key:"mimicDebug",value:function(){return a.a.post("/api/mimic_debug").then(function(e){return e.data})}},{key:"getVersion",value:function(){return a.a.get("/api/version").then(function(e){return e.data})}},{key:"updateVersion",value:function(){return a.a.post("api/update_version").then(function(e){return e.data})}}]),e}();function S(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)})}}var P={data:function(){return{isRestarting:!1,isShutingDown:!1,isDebuging:!1,isCheckingForUpdates:!1,seriesNumber:"",sections:[{title:"系统服务器",desc:"配置、查看和修改服务器地址……",icon:"grid",routeName:"server-page"},{title:"无线网络",desc:"扫描、查看和修改无线网络连接……",icon:"wifi",routeName:"wifi-page"},{title:"蓝牙手环",desc:"扫描、连接和管理蓝牙手环……",icon:"bluetooth",routeName:"bracelet-page"},{title:"其它设置",desc:"设置摄像头分辨率、位置坐标……",icon:"settings-2",routeName:"settings-page"},{title:"功能测试",desc:"测试扬声器、麦克风、液晶屏、摄像头和按键……",icon:"smartphone",routeName:"test-page"}]}},methods:{onRestartBtnClick:function(){var e=T(C.a.mark(function e(){return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.isRestarting=!0,e.next=4,I.restartServer();case 4:this.isRestarting=!1,this.$message({message:"重启成功",type:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),this.isRestarting=!1,this.$message({message:"重启失败",type:"error"});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),onShutdownBtnClick:function(){var e=T(C.a.mark(function e(){return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.isShutingDown=!0,e.next=4,I.shutdownServer();case 4:this.isShutingDown=!1,this.$message({message:"关闭系统成功",type:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),this.isShutingDown=!1,this.$message({message:"关闭系统失败",type:"error"});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),onMimicDebugBtnClick:function(){var e=T(C.a.mark(function e(){return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.isDebuging=!0,e.next=4,I.mimicDebug();case 4:this.isDebuging=!1,this.$message({message:"模拟调试成功",type:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),this.isDebuging=!1,this.$message({message:"模拟调试失败",type:"error"});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),onUpdatesBtnClick:function(){var e=T(C.a.mark(function e(){var t,n=this;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.isCheckingForUpdates=!0,e.next=4,I.getVersion();case 4:t=e.sent,this.isCheckingForUpdates=!1,t.currVersion!==t.latestVersion?this.$confirm("服务器当前版本：".concat(t.currVersion,"，最新版本：").concat(t.latestVersion),"程序版本更新",{confirmButtonText:"更新",cancelButtonText:"取消"}).then(T(C.a.mark(function e(){return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n.$message({message:"正在更新程序版本",type:"success"}),e.next=4,I.updateVersion();case 4:n.$message({message:"更新程序版本成功",type:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),n.$message({message:"更新程序版本失败",type:"error"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}))):this.$alert("服务器版本已是最新，版本号：".concat(t.currVersion),"程序版本更新",{confirmButtonText:"确定"}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),this.isCheckingForUpdates=!1,this.$message({message:"检查更新失败",type:"error"});case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=T(C.a.mark(function e(){var t;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getDeviceInfo();case 3:t=e.sent,this.seriesNumber=t.seriesNumber,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message({message:"获取设备序列号失败",type:"error"});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),components:{Navigation:_["a"]}},j=P,A=(n("a841"),Object(g["a"])(j,y,w,!1,null,"5b887573",null));A.options.__file="MainPage.vue";var O=A.exports,$=n("323e"),B=n.n($),U=function(){return n.e("pages").then(n.bind(null,"48ca"))},D=function(){return n.e("pages").then(n.bind(null,"b82a"))},M=function(){return n.e("pages").then(n.bind(null,"1479"))},R=function(){return n.e("pages").then(n.bind(null,"7782"))},V=function(){return n.e("pages").then(n.bind(null,"5c37"))},q=function(){return n.e("pages").then(n.bind(null,"7454"))},F=function(){return n.e("pages").then(n.bind(null,"f9a7"))},L=function(){return n.e("pages").then(n.bind(null,"c0e7"))},H=function(){return n.e("pages").then(n.bind(null,"22e1"))},J=function(){return n.e("pages").then(n.bind(null,"8d29"))},K=function(){return n.e("pages").then(n.bind(null,"ce80"))},z=function(){return n.e("pages").then(n.bind(null,"aa93"))};o["default"].use(b["a"]);var G=new b["a"]({routes:[{path:"/",name:"main-page",component:O,meta:{requiresAuth:!0}},{path:"",component:M,meta:{requiresAuth:!0},children:[{path:"bracelet",name:"bracelet-page",component:D},{path:"server",name:"server-page",component:R},{path:"settings",name:"settings-page",component:V},{path:"wifi",name:"wifi-page",component:F},{path:"test",name:"test-page",component:q},{path:"test/audio",name:"audio-page",component:L},{path:"test/camera",name:"camera-page",component:H},{path:"test/keypad",name:"keypad-page",component:J},{path:"test/monitor",name:"monitor-page",component:K},{path:"test/radio",name:"radio-page",component:z}]},{path:"/login",name:"login-page",component:U}]});G.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth})?l["a"].isLoggedIn()?(B.a.start(),n()):n({path:"/login",query:{redirect:e.fullPath}}):(B.a.start(),n())}),G.afterEach(function(){B.a.done()});var Q=G;n("abe2");o["default"].use(s.a),o["default"].use(c.a),o["default"].config.productionTip=!1,o["default"].prototype.$message=s.a.Message,o["default"].prototype.$confirm=s.a.MessageBox.confirm,o["default"].prototype.$alert=s.a.MessageBox.alert,a.a.interceptors.request.use(function(e){if(-1===e.url.indexOf("/api/login")){var t=l["a"].getAuthToken();t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),a.a.interceptors.response.use(function(e){return e},function(e){if(401===e.response.status){var t=Q.currentRoute.fullPath;-1===t.indexOf("/login")&&Q.push({path:"/login",query:{redirect:t}})}return Promise.reject(e)}),window.eventBus=new o["default"],new o["default"]({router:Q,render:function(e){return e(v)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("458f"),a=n.n(r);a.a},"67e4":function(e,t,n){e.exports=n.p+"img/logo_t.60cf5d18.png"},"6ab3":function(e,t,n){},"6ef5":function(e,t,n){},"75b1":function(e,t,n){"use strict";var r=n("a884"),a=n.n(r);a.a},"855a":function(e,t,n){"use strict";var r=n("6ab3"),a=n.n(r);a.a},"91d1":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,"a",function(){return i});var i=function(){function e(){r(this,e)}return o(e,null,[{key:"available",value:function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}},{key:"getItem",value:function(t){return e.available()?localStorage.getItem(t):null}},{key:"setItem",value:function(t,n){e.available()&&localStorage.setItem(t,n)}},{key:"removeItem",value:function(t){e.available()&&localStorage.removeItem(t)}}]),e}()},"9ce6":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("bc3a"),a=n.n(r),o=n("91d1");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c="AUTH_TOKEN",l="USER_NAME",p="USER_AUTH_INFO",f=function(){function e(){i(this,e)}return u(e,null,[{key:"login",value:function(e,t){return a.a.post("/api/login",{username:e,password:t},{headers:{"Content-Type":"application/json"}}).then(function(t){return o["a"].setItem(c,t.data.token),o["a"].setItem(l,e),Promise.resolve(t)},function(e){return o["a"].removeItem(c),o["a"].removeItem(l),Promise.reject(e)})}},{key:"logout",value:function(){return a.a.delete("/api/logout").then(function(e){return o["a"].removeItem(c),o["a"].removeItem(l),o["a"].removeItem(p),Promise.resolve(e)},function(e){return o["a"].removeItem(c),o["a"].removeItem(l),o["a"].removeItem(p),Promise.reject(e)})}}]),e}()},a841:function(e,t,n){"use strict";var r=n("6ef5"),a=n.n(r);a.a},a884:function(e,t,n){},abe2:function(e,t,n){},d259:function(e,t,n){},f4dd:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row nav"},[r("router-link",{staticClass:"link row",attrs:{to:{name:"main-page"}}},[r("img",{attrs:{src:n("67e4"),alt:"logo",width:"120",height:"64"}})]),r("user-account")],1)},a=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-account-container"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[n("div",[n("i",{staticClass:"user icon"})]),n("el-dropdown-menu",{staticClass:"user-account",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"user"},[n("i",{staticClass:"icon"}),n("span",{staticClass:"name"},[e._v("用户 "+e._s(e.userName))])]),n("el-dropdown-item",{staticClass:"logout",attrs:{command:"logout"}},[n("i",{staticClass:"icon"}),n("span",{staticClass:"name"},[e._v("退出登陆")])])],1)],1)],1)},i=[],s=n("9ce6"),u=n("3ca2"),c={name:"userAccount",data:function(){return{userName:""}},methods:{handleCommand:function(e){var t=this;"logout"===e&&s["a"].logout().finally(function(){t.$router.push({path:"/login"})})}},mounted:function(){this.userName=u["a"].getLoggedUserName()}},l=c,p=(n("855a"),n("0d0d"),n("2877")),f=Object(p["a"])(l,o,i,!1,null,"70480f72",null);f.options.__file="UserAccount.vue";var m=f.exports,d={components:{UserAccount:m}},g=d,h=(n("75b1"),Object(p["a"])(g,r,a,!1,null,"134f778d",null));h.options.__file="Navigation.vue";t["a"]=h.exports}});
//# sourceMappingURL=app.bd3c9321.js.map